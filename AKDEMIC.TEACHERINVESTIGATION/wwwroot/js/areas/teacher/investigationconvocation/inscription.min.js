var InitApp=function(){var e=$("#Input_InvestigationConvocationPostulantId").val(),t={observation:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="ObservationsDatatable"}},pageLength:50,orderable:[],columns:[{title:"Fecha de Observación",data:"createdAt"},{title:"Descripción",data:"description"},{title:"Estado",data:null,render:function(e){switch(e.state){case 0:return`<span class="m--font-warning">${e.stateText}</span>`;case 1:return`<span class="m--font-info">${e.stateText}</span>`;case 2:return`<span class="m--font-danger">${e.stateText}</span>`;case 3:return`<span class="m--font-success">${e.stateText}</span>`;default:return`<span class="m--font-primary">${e.stateText}</span>`}}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return 0==e.state&&(t+="<button ",t+="class='btn btn-success btn-solved ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-check'></i></button> "),t}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#observation-table").DataTable(this.options),this.events()},events:function(){$("#observation-table").on("click",".btn-solved",(function(){var a=$(this).data("id");swal({title:"¿Está seguro?",text:"El estado de la observación cambiará a pendiente de revisión.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, cambiarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=SolveObservation`.proto().parseURL(),type:"POST",data:{postulantObservationId:a},beforeSend:function(e){e.setRequestHeader("XSRF-TOKEN",$('#observationModal input:hidden[name="__RequestVerificationToken"]').val())},success:function(e){swal({type:"success",title:"Completado",text:"El estado de la observación ha sido cambiada con exito",confirmButtonText:"Excelente"}).then(t.observation.reload())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"No se ha podido cambiar el estado de la observación"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))}},advance:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="AdvanceDatatable",e.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Nombre de Avance",data:"name"},{title:"Fecha de Avance",data:"createdAt"},{title:"Archivo",data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="${`/documentos/${e.filePath}`.proto().parseURL()}"  `,t+="class='btn btn-success ",t+="m-btn btn-sm m-btn--icon' download>",t+="<span><i class='flaticon-file'></i></a> "}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return t+="<button ",t+="class='btn btn-info ",t+="m-btn btn-sm m-btn--icon btn-edit' ",t+=" data-id='"+e.id+"'>",t+="<span><i class='la la-edit'></i><span>Editar</span></span></button> ",t+="<button ",t+="class='btn btn-danger btn-delete ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#progressfileconvocationpostulant-datatable").DataTable(this.options),this.events()},events:function(){$("#progressfileconvocationpostulant-datatable").on("click",".btn-edit",(function(){var e=$(this).data("id");o.progressFile.edit.show(e)})),$("#progressfileconvocationpostulant-datatable").on("click",".btn-delete",(function(){var e=$(this).data("id");o.progressFile.delete(e)}))}},techFiles:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="UploadTechDocumentFileDatatable",e.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Nombre de Documento Tecnico",data:"name"},{title:"Fecha de Subida",data:"createdAt"},{title:"Archivo",data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="${`/documentos/${e.filePath}`.proto().parseURL()}"  `,t+="class='btn btn-success ",t+="m-btn btn-sm m-btn--icon' download>",t+="<span><i class='flaticon-file'></i></a> "}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return t+="<button ",t+="class='btn btn-info ",t+="m-btn btn-sm m-btn--icon btn-edit' ",t+=" data-id='"+e.id+"'>",t+="<span><i class='la la-edit'></i><span>Editar</span></span></button> ",t+="<button ",t+="class='btn btn-danger btn-delete ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#postulanttechnicalfile-datatable").DataTable(this.options),this.events()},events:function(){$("#postulanttechnicalfile-datatable").on("click",".btn-edit",(function(){var e=$(this).data("id");o.techFiles.edit.show(e)})),$("#postulanttechnicalfile-datatable").on("click",".btn-delete",(function(){var e=$(this).data("id");o.techFiles.delete(e)}))}},financialFiles:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="UploadFinancialDocumentFileDatatable",e.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Nombre de Documento Financiero",data:"name"},{title:"Fecha de Subida",data:"createdAt"},{title:"Archivo",data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="${`/documentos/${e.filePath}`.proto().parseURL()}"  `,t+="class='btn btn-success ",t+="m-btn btn-sm m-btn--icon' download>",t+="<span><i class='flaticon-file'></i></a> "}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return t+="<button ",t+="class='btn btn-info ",t+="m-btn btn-sm m-btn--icon btn-edit' ",t+=" data-id='"+e.id+"'>",t+="<span><i class='la la-edit'></i><span>Editar</span></span></button> ",t+="<button ",t+="class='btn btn-danger btn-delete ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#postulantfinancialfile-datatable").DataTable(this.options),this.events()},events:function(){$("#postulantfinancialfile-datatable").on("click",".btn-edit",(function(){var e=$(this).data("id");o.financialFiles.edit.show(e)})),$("#postulantfinancialfile-datatable").on("click",".btn-delete",(function(){var e=$(this).data("id");o.financialFiles.delete(e)}))}},annexedFiles:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="AnnexedFileDatatable",e.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Nombre de Anexo",data:"name"},{title:"Fecha de Subida",data:"createdAt"},{title:"Archivo",data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="${`/documentos/${e.documentPath}`.proto().parseURL()}"  `,t+="class='btn btn-success ",t+="m-btn btn-sm m-btn--icon' download>",t+="<span><i class='flaticon-file'></i></span></a> "}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return t+='<button type="button" ',t+="class='btn btn-danger btn-delete ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#annexedFile-datatable").DataTable(this.options),this.events()},events:function(){$("#annexedFile-datatable").on("click",".btn-delete",(function(){var e=$(this).data("id");o.annexedFiles.delete(e)}))}},teamMember:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.handler="TeamMemberDatatable",e.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Investigador",data:"fullName"},{title:"Rol",data:"roleName"},{title:"Concytec",data:null,orderable:!1,render:function(e){var t="",a=`${e.cvUrlCTE}`;return null!=e.cvUrlCTE?(t+=`<a href="${a}"  Target="_blank" `,t+="class='btn btn-success ",t+="m-btn btn-sm m-btn--icon'>",t+="<span><i class='flaticon-file'></i></span></a> "):t+="--",t}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return t+='<button type="button" ',t+="class='btn btn-danger btn-delete ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#team-member-datatable").DataTable(this.options),this.events()},events:function(){$("#team-member-datatable").on("click",".btn-delete",(function(){var t=$(this).data("id");swal({title:"¿Está seguro?",text:"El miembro del equipo será eliminada.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((a=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"TeamMemberDelete",id:t},success:function(e){swal({type:"success",title:"Completado",text:"El miembro del equipo ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(i.teamMember.load()).then(i.teamMember.reset())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El miembro del equipo presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))}},init:function(){this.observation.init(),this.advance.init(),this.techFiles.init(),this.financialFiles.init(),this.annexedFiles.init(),this.teamMember.init()}},a=function(){$("input[type=checkbox]").change((function(){console.log("change"),$(this).prop("checked")?$(this).parent().attr("class","option bg-selected"):$(this).parent().attr("class","option")})),$("input[type=radio]").click((function(){$(this).parent().parent().children().attr("class","option"),$(this).prop("checked")?$(this).parent().attr("class","option bg-selected"):$(this).parent().attr("class","option")})),$("#AddBtn").on("click",(function(){o.create.show()}))},n={init:function(){this.researcherUser.init(),this.researcherUserRole.init()},researcherUser:{init:function(){$("#team-member-form select[name=ResearcherUserId]").select2({width:"100%",placeholder:"Buscar...",ajax:{url:"/api/usuarios/select-search".proto().parseURL(),dataType:"json",data:function(e){return{term:e.term,page:e.page}},processResults:function(e,t){return{results:e}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3})}},researcherUserRole:{init:function(){this.load()},load:function(){$.ajax({url:"/api/rolesinvestigacion/select/get".proto().parseURL(),type:"GET"}).done((function(e){$('#team-member-form select[name="ResearcherUserRoleId"]').select2({data:e})}))}}},o={progressFile:{create:{object:$("#add-form").validate({submitHandler:function(e,a){$("#btnSaveCreate").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.advance.reload(),o.progressFile.create.clear(),$("#btnSaveCreate").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnSaveCreate").removeLoader()})).always((function(){}))}}),show:function(){$("#btnSaveCreate").removeLoader(),$("#addModal").modal("toggle")},clear:function(){$("#add-form").find(".custom-file-label").text("Seleccionar archivo"),o.progressFile.create.object.resetForm()},events:function(){$("#addModal").on("hidden.bs.modal",(function(){o.progressFile.create.clear()}))}},edit:{object:$("#edit-form").validate({submitHandler:function(e,a){$("#btnEdit").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.advance.reload(),o.progressFile.edit.clear()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnEdit").removeLoader()})).always((function(){}))}}),load:function(t){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"DetailAdvance",Id:t}}).done((function(e){$("#edit-form input[name=Name]").val(e.name),$("#edit-form input[name=Id]").val(e.id),$("#edit-form").find(".custom-file-label").text("Seleccionar archivo"),$("#edit-form").find(".custom-file").append('<div class="form-control-feedback">*Seleccionar en caso sea necesario reemplazar el documento vigente.</div>')})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!==e.responseText&&""!==e.responseText?$("#add_form_msg_txt").html(e.responseText):$("#add_form_msg_txt").html(_app.constants.ajax.message.error),$("#add_form_msg").removeClass("m--hide").show()})).always((function(){}))},show:function(e){$("#btnEdit").removeLoader(),o.progressFile.edit.load(e),$("#editModal").modal("toggle")},clear:function(){$("#edit-form").find(".custom-file-label").text("Seleccionar archivo"),o.progressFile.edit.object.resetForm()},events:function(){$("#editModal").on("hidden.bs.modal",(function(){o.progressFile.edit.clear()}))}},delete:function(a){swal({title:"¿Está seguro?",text:"El Avance será eliminada.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"AdvanceDelete",id:a},success:function(e){swal({type:"success",title:"Completado",text:"El Avance ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(t.advance.reload())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El Avance presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})},init:function(){this.create.events(),this.edit.events()}},techFiles:{create:{object:$("#tech-document-form").validate({submitHandler:function(e,a){$("#btnSaveTechDocument").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.techFiles.reload(),o.techFiles.create.clear(),$("#btnSaveTechDocument").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnSaveTechDocument").removeLoader()})).always((function(){}))}}),show:function(){$("#btnSaveTechDocument").removeLoader(),$("#techDocumentModal").modal("toggle")},clear:function(){$("#tech-document-form").find(".custom-file-label").text("Seleccionar archivo"),o.techFiles.create.object.resetForm()},events:function(){$("#techDocumentModal").on("hidden.bs.modal",(function(){o.techFiles.create.clear()}))}},edit:{object:$("#edit-form-techfile").validate({submitHandler:function(e,a){$("#btnEditTechFile").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.techFiles.reload(),o.techFiles.edit.clear(),$("#btnEditTechFile").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnEditTechFile").removeLoader()})).always((function(){}))}}),load:function(t){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"DetailUploadTechDocumentFile",Id:t}}).done((function(e){$("#edit-form-techfile input[name=Name]").val(e.name),$("#edit-form-techfile input[name=Id]").val(e.id),$("#edit-form-techfile").find(".custom-file-label").text("Seleccionar archivo"),$("#edit-form-techfile").find(".custom-file").append('<div class="form-control-feedback">*Seleccionar en caso sea necesario reemplazar el documento vigente.</div>'),$("#btnEditTechFile").removeLoader()})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!==e.responseText&&""!==e.responseText?$("#add_form_msg_txt").html(e.responseText):$("#add_form_msg_txt").html(_app.constants.ajax.message.error),$("#btnEditTechFile").removeLoader(),$("#add_form_msg").removeClass("m--hide").show()})).always((function(){}))},show:function(e){$("#btnEditTechFile").removeLoader(),o.techFiles.edit.load(e),$("#editModalTech").modal("toggle")},clear:function(){$("#edit-form-techfile").find(".custom-file-label").text("Seleccionar archivo"),o.techFiles.edit.object.resetForm()},events:function(){$("#editModalTech").on("hidden.bs.modal",(function(){o.techFiles.edit.clear()}))}},delete:function(a){swal({title:"¿Está seguro?",text:"El documento técnico será eliminado.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"UploadTechDocumentFileDelete",id:a},success:function(e){swal({type:"success",title:"Completado",text:"El documento técnico  ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(t.techFiles.reload())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El documento técnico  presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})},init:function(){this.create.events(),this.edit.events()}},financialFiles:{create:{object:$("#financial-document-form").validate({submitHandler:function(e,a){$("#btnSaveFinancialDocument").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.financialFiles.reload(),o.financialFiles.create.clear(),$("#btnSaveFinancialDocument").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnSaveFinancialDocument").removeLoader()})).always((function(){}))}}),show:function(){$("#btnSaveFinancialDocument").removeLoader(),$("#financialDocumentModal").modal("toggle")},clear:function(){$("#financial-document-form").find(".custom-file-label").text("Seleccionar archivo"),o.financialFiles.create.object.resetForm()},events:function(){$("#financialDocumentModal").on("hidden.bs.modal",(function(){o.financialFiles.create.clear()}))}},edit:{object:$("#edit-form-financialfile").validate({submitHandler:function(e,a){$("#btnEditFinancialFile").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.financialFiles.reload(),o.financialFiles.edit.clear(),$("#btnEditFinancialFile").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnEditFinancialFile").removeLoader()})).always((function(){}))}}),load:function(t){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"DetailUploadFinancialDocumentFile",Id:t}}).done((function(e){$("#edit-form-financialfile input[name=Name]").val(e.name),$("#edit-form-financialfile input[name=Id]").val(e.id),$("#edit-form-financialfile").find(".custom-file-label").text("Seleccionar archivo"),$("#edit-form-financialfile").find(".custom-file").append('<div class="form-control-feedback">*Seleccionar en caso sea necesario reemplazar el documento vigente.</div>')})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!==e.responseText&&""!==e.responseText?$("#add_form_msg_txt").html(e.responseText):$("#add_form_msg_txt").html(_app.constants.ajax.message.error),$("#add_form_msg").removeClass("m--hide").show()})).always((function(){}))},show:function(e){$("#btnEditFinancialFile").removeLoader(),o.financialFiles.edit.load(e),$("#editModalFinancial").modal("toggle")},clear:function(){$("#edit-form-financialfile").find(".custom-file-label").text("Seleccionar archivo"),o.financialFiles.edit.object.resetForm()},events:function(){$("#editModalFinancial").on("hidden.bs.modal",(function(){o.financialFiles.edit.clear()}))}},delete:function(a){swal({title:"¿Está seguro?",text:"El documento de financiero será eliminado.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"UploadFinancialDocumentFileDelete",id:a},success:function(e){swal({type:"success",title:"Completado",text:"El documento de financiero ha sido eliminado con exito",confirmButtonText:"Excelente"}).then(t.financialFiles.reload())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El documento de financiero presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})},init:function(){this.create.events(),this.edit.events()}},annexedFiles:{create:{object:$("#annexed-file-modal-form").validate({submitHandler:function(e,a){$("#btnSaveAnnexedFile").addLoader(),a.preventDefault();let n=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.annexedFiles.reload(),i.annexedFile.load(),o.annexedFiles.create.clear(),$("#btnSaveAnnexedFile").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnSaveAnnexedFile").removeLoader()})).always((function(){}))}}),show:function(){$("#btnSaveAnnexedFile").removeLoader(),$("#annexedFileModal").modal("toggle")},clear:function(){$("#annexed-file-modal-form").find(".custom-file-label").text("Seleccionar archivo"),o.annexedFiles.create.object.resetForm()},events:function(){$("#annexedFileModal").on("hidden.bs.modal",(function(){o.annexedFiles.create.clear()}))}},delete:function(a){swal({title:"¿Está seguro?",text:"El anexo de postulación será eliminado.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"AnnexedFileDelete",id:a},success:function(e){swal({type:"success",title:"Completado",text:"El anexo de postulación ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(t.annexedFiles.reload()).then(i.annexedFile.load())},error:function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El anexo de postulación presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})},init:function(){this.create.events()}},init:function(){this.progressFile.init(),this.techFiles.init(),this.financialFiles.init(),this.annexedFiles.init()}},i={generalInformation:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=GeneralInformationLoad`,type:"GET"}).done((function(e){$(".data-weight").each((function(){parseFloat($(this).val())})),$("#generalInformation-container").html(e)}))},events:function(){$("#generalInformation-form").validate({submitHandler:function(e,t){$("#btnGeneralInformationSave").addLoader(),t.preventDefault();let a=new FormData(e);a.append("FacultyText",$("#Faculty option:selected").text()),a.append("CareerText",$("#Career option:selected").text()),a.append("DepartmentText",$("#Department option:selected").text()),a.append("ProvinceText",$("#Province option:selected").text()),a.append("DistrictText",$("#District option:selected").text()),$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),i.generalInformation.load(),s.load(),$("#btnGeneralInformationSave").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnGeneralInformationSave").removeLoader()})).always((function(){}))}})},init:function(){this.load(),this.events()}},problemDescription:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=ProblemDescriptionLoad`,type:"GET"}).done((function(e){$("#problemDescription-container").html(e)}))},events:function(){$("#problemDescription-form").validate({ignore:".note-editor *",submitHandler:function(e,t){$("#btnProblemDescriptionSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),i.problemDescription.load(),s.load(),$("#btnProblemDescriptionSave").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnProblemDescriptionSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},markReference:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=MarkReferenceLoad`,type:"GET"}).done((function(e){$("#markReference-container").html(e)}))},events:function(){$("#markReference-form").validate({submitHandler:function(e,t){$("#btnMarkReferenceSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#btnMarkReferenceSave").removeLoader(),s.load()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnMarkReferenceSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},methodology:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=MethodologyLoad`,type:"GET"}).done((function(e){$("#methodology-container").html(e)}))},events:function(){$("#methodology-form").validate({submitHandler:function(e,t){$("#btnMethodologySave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),i.methodology.load(),s.load(),$("#btnMethodologySave").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnMethodologySave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},expectedResult:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=ExpectedResultLoad`,type:"GET"}).done((function(e){$("#expected-result-container").html(e)}))},events:function(){$("#expected-result-form").validate({submitHandler:function(e,t){$("#btnExpectedResultSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#btnExpectedResultSave").removeLoader(),s.load()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnExpectedResultSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},teamMember:{calculateWeight:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"TeamMemberWeight",InvestigationConvocationPostulantId:e}}).done((function(e){$("#team-member-weight").text(`(peso: ${e} %)`)}))},load:function(){t.teamMember.reload(),i.teamMember.calculateWeight()},reset:function(){$("#team-member-form select[name=ResearcherUserId]").empty(),$("#team-member-form select[name=ResearcherUserRoleId]").val(0).trigger("change"),$("#team-member-form").validate().resetForm(),$("#team-member-form input[name=CvFile]").next(".custom-file-label").html("Seleccione archivo")},events:function(){$("#team-member-form").validate({submitHandler:function(e,t){$("#btnTeamMemberSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),i.teamMember.reset(),i.teamMember.load(),s.load(),$("#btnTeamMemberSave").removeLoader()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnTeamMemberSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},annexedFile:{load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion?handler=AnnexedFileLoad`,type:"GET"}).done((function(e){$("#annexed-file-form input[name=ProjectDuration]").val(e.projectDuration),$("#projectDurationWeight").text(`${e.projectDurationWeight} %`),$("#postulationAttachmentFilesWeight").text(`(peso: ${e.postulationAttachmentFilesWeight} %)`)}))},reset:function(){},events:function(){$("#annexed-file-form").validate({submitHandler:function(e,t){$("#btnAnnexedFileSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),i.annexedFile.load(),$("#btnAnnexedFileSave").removeLoader(),s.load()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnAnnexedFileSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},additionalQuestion:{load:function(){},reset:function(){},events:function(){$("#additional-question-form").validate({submitHandler:function(e,t){$("#btnAdditionalQuestionSave").addLoader(),t.preventDefault();let a=new FormData(e);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#btnAdditionalQuestionSave").removeLoader(),s.load()})).fail((function(e){toastr.error(e.responseText,_app.constants.toastr.title.error),$("#btnAdditionalQuestionSave").removeLoader()})).always((function(){}))}})},init:function(){this.events()}},init:function(){this.markReference.init(),this.problemDescription.init(),this.generalInformation.init(),this.methodology.init(),this.expectedResult.init(),this.teamMember.init(),this.annexedFile.init(),this.additionalQuestion.init()}},r={object:null,load:function(){this.object=new mWizard("m_wizard",{startStep:1})},events:{onChange:function(){$(".m-wizard__step-number").on("click",(function(){var e=$(this).data("step");switch(e){case 1:i.generalInformation.load();break;case 2:i.problemDescription.load();break;case 3:i.markReference.load();break;case 4:i.methodology.load();break;case 5:i.expectedResult.load();break;case 6:i.teamMember.reset(),i.teamMember.load();break;case 7:i.annexedFile.load()}r.object.goTo(e)}))},init:function(){this.onChange()}},init:function(){this.events.init(),this.load()}},s={init:function(){this.load()},load:function(){$.ajax({url:`/investigador/convocatoria/${e}/inscripcion`.proto().parseURL(),type:"GET",data:{handler:"ProgressPercentage",InvestigationConvocationPostulantId:e}}).done((function(e){$("#progressBarComplete").text(`${e.progressBarPercentage} %`),$("#progressBarComplete").css("width",`${e.progressBarPercentage}%`),$("#generalInformation-percentage").text(`${e.generalInformationPercentage} %`),$("#problemDescription-percentage").text(`${e.problemDescriptionPercentage} %`),$("#markReferences-percentage").text(`${e.markReferencePercentage} %`),$("#methodology-percentage").text(`${e.methodologyPercentage} %`),$("#expectedResult-percentage").text(`${e.expectedResultPercentage} %`),$("#team-member-percentage").text(`${e.teamMemberPercentage} %`),$("#annexFiles-percentage").text(`${e.annexFilesPercentage} %`),$("#additionalQuestions-percentage").text(`${e.additionalQuestionsPercentage} %`)}))}},c=function(){$(".mv_summernote").summernote({lang:"es-ES",height:250,toolbar:[["style",["style"]],["font",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ol","ul","paragraph","height"]],["table",["table"]],["insert",["link","video","hr"]],["view",["undo","redo","fullscreen","codeview"]]]})};return{init:function(){s.init(),o.init(),n.init(),a(),t.init(),r.init(),i.init(),c()}}}();$((function(){InitApp.init(),3!=$("#Input_ProjectState").val()&&2!=$("#Input_ProjectState").val()||($(":input").prop("disabled",!0),$(":button").prop("disabled",!0))}));