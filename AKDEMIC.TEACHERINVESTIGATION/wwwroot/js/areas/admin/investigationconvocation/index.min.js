var InitApp=function(){var t={investigationConvocation:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/convocatorias".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.handler="Datatable",t.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Código",data:"code"},{title:"Nombre",data:"name"},{title:"Fecha de Inicio de Postulación",data:"inscriptionStartDate"},{title:"Fecha de Fin de Postulación",data:"inscriptionEndDate"},{title:"Fecha de Inicio",data:"startDate"},{title:"Fecha de Fin",data:"endDate"},{title:"Puntaje Mínimo",data:"minScore"},{title:"Opciones",data:null,orderable:!1,render:function(t){var n="",a=`/admin/convocatorias/editar/${t.id}`;return n+=`<a class='btn btn-success m-btn btn-sm m-btn--icon-only' href='${`/admin/convocatoria-de-investigacion/${t.id}/archivos`}' `,n+='<span><i class="la la-edit"></i><span>Documentos</span></span></a> ',n+=`<a class='btn btn-info m-btn btn-sm m-btn--icon-only' href='${a}' `,n+='<span><i class="la la-edit"></i><span>Editar</span></span></a> ',n+="<button ",n+="class='btn btn-danger btn-delete ",n+="m-btn btn-sm  m-btn--icon-only' ",n+=" data-id='"+t.id+"'>",n+="<i class='la la-trash'></i></button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events()},events:function(){$("#data-table").on("click",".btn-delete",(function(){var n=$(this).data("id");swal({title:"¿Está seguro?",text:"La convocatoria será eliminada.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((a=>{$.ajax({url:"/admin/convocatorias".proto().parseURL(),type:"GET",data:{handler:"InvestigationConvocationDelete",id:n},success:function(n){swal({type:"success",title:"Completado",text:"La convocatoria ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(t.investigationConvocation.reload())},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"La convocatoria presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))}},init:function(){this.investigationConvocation.init()}},n=function(){$("#search").doneTyping((function(){t.investigationConvocation.reload()}))};return{init:function(){t.init(),n()}}}();$((function(){InitApp.init()}));