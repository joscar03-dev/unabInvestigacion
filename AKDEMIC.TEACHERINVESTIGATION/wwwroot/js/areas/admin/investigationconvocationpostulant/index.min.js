var InitApp=function(){var t={postulations:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/postulaciones".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){delete t.columns,t.handler="PostulationsDatatable",t.searchValue=$("#search").val(),t.searchStartDate=$("#StartDate").val(),t.searchEndDate=$("#EndDate").val(),t.facultyId=$("#Faculties").val(),t.searchReviewState=$("#Reviews").val(),t.searchProgressState=$("#Progress").val()}},pageLength:50,orderable:[],columns:[{title:"Código",data:"code"},{title:"Convocatoria",data:"name"},{title:"Nombre del Proyecto",data:"projectTitle"},{title:"Nombre de Investigador",data:"fullName"},{title:"Facultad",data:"faculty"},{title:"Fecha de Registro Postulación",data:"createdAt"},{title:"%Avance",data:"percentA"},{title:"Estado de Revisión",data:null,render:function(t){switch(t.reviewState){case 0:return`<span class="m--font-warning">${t.reviewStateText}</span>`;case 1:return`<span class="m--font-info">${t.reviewStateText}</span>`;case 2:return`<span class="m--font-danger">${t.reviewStateText}</span>`;case 3:return`<span class="m--font-success">${t.reviewStateText}</span>`;default:return`<span class="m--font-primary">${t.reviewStateText}</span>`}}},{title:"Estado de Proyecto",data:null,render:function(t){switch(t.projectState){case 0:return`<span class="m--font-warning">${t.projectStateText}</span>`;case 1:return`<span class="m--font-info">${t.projectStateText}</span>`;case 2:return`<span class="m--font-danger">${t.projectStateText}</span>`;case 3:return`<span class="m--font-success">${t.projectStateText}</span>`;default:return`<span class="m--font-primary">${t.projectStateText}</span>`}}},{title:"Opciones",data:null,orderable:!1,render:function(t){var e="";return e+=`<a class='btn btn-info m-btn btn-sm m-btn--icon-only' href='${`/admin/postulaciones/detalle/${t.id}`}' `,e+='<span><i class="la la-edit"></i><span>Detalle</span></span></a> '}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events()},events:function(){$("#data-table").on("click",".btn-edit",(function(){var t=$(this).data("id");modal.edit.show(t)}))}},init:function(){this.postulations.init()}},e=function(){$("#search").doneTyping((function(){t.postulations.reload()}))},a={init:function(){this.postulationsDate.init()},postulationsDate:{init:function(){$("#StartDate").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}),$("#EndDate").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker})}}},n={init:function(){this.faculty.init(),this.progress.init(),this.reviews.init()},faculty:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/api/facultades/get".proto().parseURL(),type:"GET"}).done((function(t){$("#Faculties").select2({data:t})}))},events:function(){$("#Faculties").on("change",(function(){t.postulations.reload()}))}},progress:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/api/convocatorias/progress/get".proto().parseURL(),type:"GET"}).done((function(t){$("#Progress").select2({data:t})}))},events:function(){$("#Progress").on("change",(function(){t.postulations.reload()}))}},reviews:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/api/convocatorias/reviews/get".proto().parseURL(),type:"GET"}).done((function(t){$("#Reviews").select2({data:t})}))},events:function(){$("#Reviews").on("change",(function(){t.postulations.reload()}))}}};return{init:function(){n.init(),t.init(),e(),a.init()}}}();$((function(){InitApp.init()}));