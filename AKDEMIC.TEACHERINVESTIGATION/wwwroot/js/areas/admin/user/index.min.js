var InitApp=function(){var t={user:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/usuarios".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.handler="Datatable",t.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{title:"Usuario",data:"userName"},{title:"Nombre",data:"name"},{title:"Apellido Paterno",data:"paternalSurname"},{title:"Apellido Materno",data:"maternalSurname"},{title:"Correo",data:"email"},{title:"Estado",data:"state"},{title:"Opciones",data:null,orderable:!1,render:function(t){var e="",n=`/admin/usuarios/${t.id}/editar`;return 1==t.isDeleted?(e+="<button ",e+="class='btn btn-brand btn-restart ",e+="m-btn btn-sm  m-btn--icon-only' ",e+=" data-id='"+t.id+"'>",e+="<i class='la la-brand'>Restablecer</i></button> "):(e+=`<a class='btn btn-info m-btn btn-sm m-btn--icon-only' href='${n}' `,e+='<span><i class="la la-edit"></i><span>Editar</span></span></a> ',e+="<button ",e+="class='btn btn-danger btn-delete ",e+="m-btn btn-sm  m-btn--icon-only' ",e+=" data-id='"+t.id+"'>",e+="<i class='la la-trash'></i></button> ")}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events()},events:function(){$("#data-table").on("click",".btn-delete",(function(){let e=$(this).data("id");swal({title:"¿Está seguro?",text:"El usuario sera eliminado",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:"/admin/usuarios?handler=UserDelete".proto().parseURL(),type:"POST",data:{userId:e},beforeSend:function(t){t.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:function(e){swal({type:"success",title:"Completado",text:"El usuario ha sido eliminada con exito",confirmButtonText:"Excelente"}).then(t.user.reload())},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El usuario presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})})),$("#data-table").on("click",".btn-restart",(function(){let e=$(this).data("id");swal({title:"¿Está seguro?",text:"El usuario sera restablecido",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, restablecerlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:"/admin/usuarios?handler=UserRestart".proto().parseURL(),type:"POST",data:{userId:e},beforeSend:function(t){t.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:function(e){swal({type:"success",title:"Completado",text:"El usuario ha sido restablecido con exito",confirmButtonText:"Excelente"}).then(t.user.reload())},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El usuario presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))}},init:function(){this.user.init()}},e=function(){$("#search").doneTyping((function(){t.user.reload()}))};return{init:function(){t.init(),e()}}}();$((function(){InitApp.init()}));