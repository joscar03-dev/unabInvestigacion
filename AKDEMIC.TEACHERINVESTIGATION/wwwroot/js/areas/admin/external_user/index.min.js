var index=function(){var t="/admin/usuarios-externos",e={external_user:{object:null,options:{ajax:{url:`${t}`,type:"GET",data:function(t){t.handler="ExternalUserDatatable",t.search=$("#search").val()}},columns:[{data:"userName",title:"Usuario"},{data:"fullName",title:"Nombre Completo"},{data:"dni",title:"DNI"},{data:null,title:"Opciones",render:function(t){var e="";return e+=`<a href="/admin/usuarios-externos/editar/${t.id}" class="btn btn-brand m-btn btn-sm m-btn m-btn--icon"><span><i class="la la-edit"></i><span>Editar</span></span></a> `,e+=`<button data-id='${t.id}' class="btn btn-delete btn-danger m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-trash"></i></button>`}}]},reload:function(){e.external_user.object.ajax.reload()},events:{onDelete:function(){$("#data-table").on("click",".btn-delete",(function(){var n=$(this).data("id");swal({type:"warning",title:"Eliminará al usuario seleccionado.",text:"¿Seguro que desea eliminarlo?.",confirmButtonText:"Aceptar",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({type:"POST",url:`${t}?handler=DeleteExternalUser&id=${n}`,beforeSend:function(t){t.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())}}).done((function(){e.external_user.reload(),swal({type:"success",title:"Completado",text:"Usuario eliminado satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})}))}))})}))},init:function(){this.onDelete()}},init:function(){e.external_user.object=$("#data-table").DataTable(e.external_user.options),e.external_user.events.init()}},init:function(){e.external_user.init()}},n={onSearch:function(){$("#search").doneTyping((function(){e.external_user.reload()}))},init:function(){this.onSearch()}};return{init:function(){e.init(),n.init()}}}();$((()=>{index.init()}));