var InitApp=function(){var t={projectReportNotExpired:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.handler="DatatableNotExpired"}},pageLength:50,orderable:[],columns:[{title:"Investigador Principal",data:"fullName"},{title:"Correo",data:"email"},{title:"Entregable",data:"reportName"},{title:"Fecha de Expiración",data:"expirationDate"},{title:"Dias  Restantes",data:"timeRest"},{title:"Último correo enviado",data:"lastEmailSendedDate"},{title:"Opciones",data:null,orderable:!1,render:function(t){var e="";return e+="<button ",e+="class='btn btn-brand m-btn  btn-delete ",e+="m-btn btn-sm  m-btn--icon-only' ",e+=" data-id='"+t.id+"'>",e+="<i class='la la-envelope-o'></i> Enviar Correo</button> "}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#projectReportNotExpired-table").DataTable(this.options),this.events()},events:function(){$("#projectReportNotExpired-table").on("click",".btn-delete",(function(){var e=$(this).data("id");swal({title:"¿Está seguro?",text:"Se enviara un correo al usuario que esta pronto de vencer su entregable.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, enviar",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((n=>{$.ajax({url:"/?handler=SendProjectReportEmail".proto().parseURL(),type:"POST",data:{investigationProjectReportId:e},beforeSend:function(t){t.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]').val())},success:function(e){swal({type:"success",title:"Completado",text:"Se envió el correo con exito",confirmButtonText:"Excelente"}).then(t.projectReportNotExpired.reload())},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"No se pudo enviar el Correo"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))}},projectReportExpired:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.handler="DatatableExpired"}},pageLength:50,orderable:[],columns:[{title:"Investigador Principal",data:"fullName"},{title:"Correo",data:"email"},{title:"Entregable",data:"reportName"},{title:"Fecha de Expiración",data:"expirationDate"}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#projectReportExpired-table").DataTable(this.options)}},init:function(){this.projectReportNotExpired.init(),this.projectReportExpired.init()}};return{init:function(){t.init()}}}();$((function(){InitApp.init()}));